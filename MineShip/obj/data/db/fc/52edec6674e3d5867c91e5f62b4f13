/// <summary>
/// Computes attenuation for spot lights.
/// </summary>
class SpotShading : PointShadingBase, LightParameters
{
    override float3 GetAttenuation(int lightIndex)
    {
        float3 dirToLight = GetDirectionToLight(lightIndex);
        dirToLight = normalize(-dirToLight);
        float3 lightDir = GetLightDirection(lightIndex);
        lightDir = normalize(lightDir);
        float fieldAngle = LightSpotFieldAngle[lightIndex];
        float beamAngle = LightSpotBeamAngle[lightIndex];
        float factor = smoothstep(fieldAngle, beamAngle, dot(dirToLight, lightDir));
        return float3(factor, factor, factor);
    }
};