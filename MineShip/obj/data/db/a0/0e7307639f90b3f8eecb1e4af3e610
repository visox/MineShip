/// <summary>
/// Computes shading from shadow maps.
/// </summary>
class ShadowMapReceiver : ShadingBase
{
    ShadingGroup shadows[];

    override stage float4 Shading()
    {
        float4 currentShading = 0.0f;
        foreach (var shadow in shadows)
        {
            currentShading += shadow.ComputeShading();
        }
        return base.Shading() + currentShading;
    }
};